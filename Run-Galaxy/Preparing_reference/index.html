
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://artbio.github.io/startbio/Run-Galaxy/Preparing_reference/">
      
      
        <link rel="prev" href="../Loading_data_in_galaxy/">
      
      
        <link rel="next" href="../test_instance/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.17">
    
    
      
        <title>PREPARE A REFERENCE GENOME - STARTbio</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.bcfcd587.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      
  
  
    
    
  
  
  <style>:root{--md-admonition-icon--danger:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 12"><path d="M4.855.708c.5-.896 1.79-.896 2.29 0l4.675 8.351a1.312 1.312 0 0 1-1.146 1.954H1.33A1.313 1.313 0 0 1 .183 9.058ZM7 7V3H5v4Zm-1 3a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z"/></svg>');}</style>



    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+Sans+Display:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Noto Sans Display";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../spoiler_files/spoiler.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#1-prepare-the-drosophila-genome-dmel-all-chromosome-r618-for-indexation" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="STARTbio" class="md-header__button md-logo" aria-label="STARTbio" data-md-component="logo">
      
  <img src="../../assets/startbio_icon.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            STARTbio
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              PREPARE A REFERENCE GENOME
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/ARTbio/startbio" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    ARTbio/startbio
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../bulk_RNAseq-IOC/00_IOC_RNAseq_program/" class="md-tabs__link">
          
  
  Interactive Online Companionship (IOC)

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../ten2/Regex_01/" class="md-tabs__link">
          
  
  1Omin2

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../AnalyseGenomes_2024/outline/" class="md-tabs__link">
          
  
  Galaxy Trainings

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../bash_snippets/" class="md-tabs__link">
          
  
  Code Snippets

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../links/" class="md-tabs__link">
        
  
    
  
  Links

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="STARTbio" class="md-nav__button md-logo" aria-label="STARTbio" data-md-component="logo">
      
  <img src="../../assets/startbio_icon.png" alt="logo">

    </a>
    STARTbio
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/ARTbio/startbio" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    ARTbio/startbio
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    
  
  
    <a href="../../bulk_RNAseq-IOC/00_IOC_RNAseq_program/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Interactive Online Companionship (IOC)
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

  

      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../ten2/Regex_01/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    1Omin2
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Galaxy Trainings
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Galaxy Trainings
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../AnalyseGenomes_2024/outline/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Analyse des Génomes (2024)
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
      
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" checked>
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Run your Galaxy server
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            Run your Galaxy server
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    INTRODUCTION
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../bare-galaxy-google/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    STANDALONE GALAXY IN GCP
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../bare-galaxy-IFB/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    STANDALONE GALAXY IN IFB CLOUD
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Run_workflow/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AFTER DEPLOYMENT
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../GalaxyKickStart/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    INSTALL GALAXY WITH ANSIBLE
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Loading_data_in_galaxy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LOAD INPUT DATA
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    PREPARE A REFERENCE GENOME
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    PREPARE A REFERENCE GENOME
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-prepare-the-drosophila-genome-dmel-all-chromosome-r618-for-indexation" class="md-nav__link">
    <span class="md-ellipsis">
      1. Prepare the Drosophila genome dmel-all-chromosome-r6.18 for indexation.
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. Prepare the Drosophila genome dmel-all-chromosome-r6.18 for indexation.">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-simplify-fasta-headers" class="md-nav__link">
    <span class="md-ellipsis">
      A. simplify fasta headers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#b-declare-the-dmel-main-chromosome-r618-dataset-as-a-reference-to-galaxy" class="md-nav__link">
    <span class="md-ellipsis">
      B. Declare the dmel-MAIN-chromosome-r6.18 dataset as a reference to Galaxy.
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-index-dmel-r618-for-bowtie" class="md-nav__link">
    <span class="md-ellipsis">
      2. Index dmel-r6.18 for Bowtie.
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-index-dmel-r618-for-the-sam-to-bam-tool" class="md-nav__link">
    <span class="md-ellipsis">
      3. Index dmel-r6.18 for the sam-to-bam tool.
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-stop-your-ansible-galaxy-instance" class="md-nav__link">
    <span class="md-ellipsis">
      3. Stop your ansible-galaxy instance
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Stop your ansible-galaxy instance">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-reserve-a-static-ip-address" class="md-nav__link">
    <span class="md-ellipsis">
      A. Reserve a static IP address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#b-stop-your-instance" class="md-nav__link">
    <span class="md-ellipsis">
      B. Stop your Instance.
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../test_instance/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    TEST YOUR GALAXY INSTANCE
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../start_from_image/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    IN CASE OF EMERGENCY
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin_kit/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ADMIN TOOL KIT
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Google_cloud_Account/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Appendix 1: Getting a Google Cloud Engine Account
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../spin_off_VM/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Appendix 2: Start and stop a Google virtual machine
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../SocksProxy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Appendix 3: http access to the IFB cloud
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Galaxy_architecture/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Appendix 4: Galaxy software architecture
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Docker_GalaxyKickStart/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Appendix 5: Install a Galaxy server with Docker
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../Run-COH/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Run a Galaxy workflow for somatic mutation detection in cancers
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../translocations/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Search for chomosome translocations
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../reference_based_RNAseq/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Reference-based RNAseq analysis
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../metavisitor/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Viruses Metagenomics
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../TARGET_download/intro/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Download TARGET-AML Data in Galaxy
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../bash_snippets/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Code Snippets
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../links/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Links
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-prepare-the-drosophila-genome-dmel-all-chromosome-r618-for-indexation" class="md-nav__link">
    <span class="md-ellipsis">
      1. Prepare the Drosophila genome dmel-all-chromosome-r6.18 for indexation.
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. Prepare the Drosophila genome dmel-all-chromosome-r6.18 for indexation.">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-simplify-fasta-headers" class="md-nav__link">
    <span class="md-ellipsis">
      A. simplify fasta headers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#b-declare-the-dmel-main-chromosome-r618-dataset-as-a-reference-to-galaxy" class="md-nav__link">
    <span class="md-ellipsis">
      B. Declare the dmel-MAIN-chromosome-r6.18 dataset as a reference to Galaxy.
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-index-dmel-r618-for-bowtie" class="md-nav__link">
    <span class="md-ellipsis">
      2. Index dmel-r6.18 for Bowtie.
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-index-dmel-r618-for-the-sam-to-bam-tool" class="md-nav__link">
    <span class="md-ellipsis">
      3. Index dmel-r6.18 for the sam-to-bam tool.
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-stop-your-ansible-galaxy-instance" class="md-nav__link">
    <span class="md-ellipsis">
      3. Stop your ansible-galaxy instance
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Stop your ansible-galaxy instance">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-reserve-a-static-ip-address" class="md-nav__link">
    <span class="md-ellipsis">
      A. Reserve a static IP address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#b-stop-your-instance" class="md-nav__link">
    <span class="md-ellipsis">
      B. Stop your Instance.
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://github.com/ARTbio/startbio/edit/master/docs/Run-Galaxy/Preparing_reference.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/ARTbio/startbio/raw/master/docs/Run-Galaxy/Preparing_reference.md" title="View source of this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.15 8.15 0 0 1-1.23-2Z"/></svg>
    </a>
  


<p>The last thing we can do for the incoming analyses is to prepare several indexes of your
Drosophila genome, which will be available Galaxy-wide.</p>
<p>Alignment programs and a number of tools use their own, specific index, to speed up their
tasks. Thus, since you will align later reads using bowtie, you should prepare a bowtie
genome index. Likewise, you will need to make a conversion of SAM to BAM format using a
samtools tool. You also need to prepare a fasta index (.fai) of your genome for this tool.</p>
<p>In Galaxy, these indexing tasks are preceeded by a "fetch and dbkey" task, whose
purpose is to implement the Galaxy database and inform it of the existence of this genome
and of possible derived indexes.</p>
<p><center><img alt="" src="../images/galaxy_indexing.svg" width="600" /></center></p>
<h2 id="1-prepare-the-drosophila-genome-dmel-all-chromosome-r618-for-indexation">1. <img alt="🔧" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/1f527.svg" title=":wrench:" /> Prepare the <em>Drosophila</em> genome dmel-all-chromosome-r6.18 for indexation.<a class="headerlink" href="#1-prepare-the-drosophila-genome-dmel-all-chromosome-r618-for-indexation" title="Permanent link">&para;</a></h2>
<p>In the history <code>REFERENCES</code> we have uploaded a <code>dmel-all-chromosome-r6.18</code> dataset. If you
click on the name of the dataset, you will expand the (green) dataset box and see that it
is a fasta format dataset which contains 1870 sequences.</p>
<p>Indeed, the dataset contains the main <em>Drosophila</em> chromosomes X, Y, 2 (L and R), 3 (L and R)
and 4, but also many unmapped contig sequences and possibly some minor haplotypes.</p>
<p>Thus, before indexing our Drosophila genome, we are going to clean it a little bit by,</p>
<ul>
<li>simplifying the fasta headers (keeping only the characteres before the first space)</li>
<li>and explicitly picking the main chromosomes aforementioned.</li>
</ul>
<h3 id="a-simplify-fasta-headers">A. <img alt="🔧" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/1f527.svg" title=":wrench:" /> simplify fasta headers<a class="headerlink" href="#a-simplify-fasta-headers" title="Permanent link">&para;</a></h3>
<ul>
<li>Go to the <code>REFERENCE</code> history</li>
<li>Select the tool <img alt="🔧" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/1f527.svg" title=":wrench:" /> <strong>Regex Find And Replace</strong> (Galaxy Version 1.0.1) in the tool
sub-menu <code>Analyse des Génomes</code>. To find easily the tool, you may also type <code>Regex Find And
Replace</code> in the search box <img alt="" src="../images/search_box.png" width="200" /> at the top of the
tool bar.</li>
</ul>
<div class="admonition note">
<p class="admonition-title">fill the form of <img alt="🔧" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/1f527.svg" title=":wrench:" /> [Regex Find And Replace]</p>
<ul>
<li><strong>Select lines from</strong>: <code>10. dmel-all-chromosome-r6.18</code></li>
<li><strong>Check</strong>: Click <code>Insert Check</code></li>
<li><strong>Find Regex</strong>: <code>.+</code> <img alt="⚠" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/26a0.svg" title=":warning:" /> this is a <em>space</em>, followed by a dot, followed by a plus.</li>
<li><strong>Replacement</strong>: <em>Nothing</em> <img alt="⚠" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/26a0.svg" title=":warning:" /> be sure that the remplacement box is <em>empty</em></li>
<li><strong>Click <img alt="✔" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/2714.svg" title=":heavy_check_mark:" /><code>Execute</code></strong></li>
</ul>
</div>
<p>After run, you can compare the new dataset with the initial genome dataset.</p>
<details class="question">
<summary>What can you say, at least for the chromosome 2L ?</summary>
<p>The visible header is now <code>&gt;2L</code>.
It was <code>&gt;2L type=golden_path_region; loc=2L:1..23513712; ID=2L; dbxref=GB:AE014134,GB:AE014134,REFSEQ:NT_033779;
MD5=b6a98b7c676bdaa11ec9521ed15aff2b; length=23513712; release=r6.18; species=Dmel;</code>
before !</p>
</details>
<div class="admonition note">
<p class="admonition-title">Create a short list of string "on the fly" with <img alt="🔧" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/1f527.svg" title=":wrench:" /> [Upload Data]</p>
<ul>
<li><strong>Click the <code>Upload Data</code> menu</strong></li>
<li><strong>Click the <code>Paste/Fetch Data</code> button</strong></li>
<li><strong>Give a name to the dataset</strong> (<code>chromosome_list</code> in replacement of <code>New File</code>)</li>
<li><strong>In the main Paste field</strong> copy this list:
<div class="language-text highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>X
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>Y
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>2L
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>2R
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>3L
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>3R
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>4
</span></code></pre></div></li>
<li><strong>Click the Start dark blue button</strong></li>
</ul>
</div>
<ul>
<li>Select the tool <img alt="🔧" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/1f527.svg" title=":wrench:" /> <strong>Pick Fasta sequences</strong> with header satisfying a string query
  (Galaxy Version 3.0.1) in the tool sub-menu <code>Analyse des Génomes</code>. You may also use The
  tool search box.</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Fill the form of <img alt="🔧" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/1f527.svg" title=":wrench:" /> Pick Fasta sequences</p>
<ul>
<li><strong>Source file</strong>: <code>11. Regex Find And Replace on data 10</code></li>
<li><strong>for a</strong>: Check <code>list of string</code></li>
<li><strong>retrieve sequences whose headers...</strong>: <code>exactly</code> <strong>+</strong> <code>contain one of this list string</code></li>
<li><strong>list of strings dataset</strong>: <code>13. chromosome_list</code></li>
<li><strong>Click <img alt="✔" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/2714.svg" title=":heavy_check_mark:" /><code>Execute</code></strong></li>
</ul>
</div>
<ul>
<li>Rename the created dataset using the pencil icon <img alt="✏" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/270f.svg" title=":pencil2:" /> as <code>dmel-MAIN-chromosome-r6.18</code></li>
</ul>
<details class="question">
<summary>What can you notice if you look at <code>dmel-MAIN-chromosome-r6.18</code> ?</summary>
<p>The number of fasta sequence is <code>7 sequences</code></p>
</details>
<details class="question">
<summary>How can we check that the right chromosomes have been collected in the dataset ?</summary>
<p>Use the <img alt="🔧" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/1f527.svg" title=":wrench:" /> <strong>Select lines</strong> that match an expression (Galaxy Version 1.0.3)</p>
<ul>
<li><strong>Select lines from</strong>: <code>dmel-MAIN-chromosome-r6.18</code></li>
<li><strong>that</strong>: <code>Matching</code></li>
<li><strong>the pattern</strong>: <code>^&gt;</code></li>
<li><strong>Keep header line</strong>: <code>No</code></li>
<li><strong>Click <img alt="✔" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/2714.svg" title=":heavy_check_mark:" /><code>Execute</code></strong></li>
</ul>
<p>From the result, can you deduce the role of the caret sign <code>^</code> in the regular expression ?</p>
</details>
<h3 id="b-declare-the-dmel-main-chromosome-r618-dataset-as-a-reference-to-galaxy">B. <img alt="🔧" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/1f527.svg" title=":wrench:" /> Declare the <code>dmel-MAIN-chromosome-r6.18</code> dataset as a reference to Galaxy.<a class="headerlink" href="#b-declare-the-dmel-main-chromosome-r618-dataset-as-a-reference-to-galaxy" title="Permanent link">&para;</a></h3>
<p>Now that we have a "clean" Drosophila reference genome in fasta format, it is time to notice
it to Galaxy. This is an administrator task which we are going to perform.</p>
<ul>
<li>Go to the <code>Admin</code> menu (in the top menu bar)</li>
<li>In the left bar of the <code>Admin</code> board, click <code>Local Data</code></li>
<li>Click on the data manager tool <img alt="🔧" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/1f527.svg" title=":wrench:" /> <strong>Create DBKey and Reference Genome</strong> <em>fetching</em></li>
</ul>
<p><img alt="" src="../images/dbkey_manager.png" width="200" /></p>
<ul>
<li>Note that the form of the tool opens in a new browser window</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Fill the form of <img alt="🔧" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/1f527.svg" title=":wrench:" /> <strong>Create DBKey and Reference Genome</strong> <em>fetching</em></p>
<ul>
<li><strong>Use existing dbkey or create a new one.</strong>: <code>New</code></li>
<li><strong>dbkey</strong>: Choose a simple identifier such as <code>dmel-r6.18</code></li>
<li><strong>Display name for dbkey</strong>: <em>Leave this field empty</em></li>
<li><strong>Name of Sequence</strong>: <em>Leave this field empty</em></li>
<li><strong>ID for sequence</strong>: <em>Leave this field empty</em></li>
<li><strong>Choose the source for the reference genome</strong>: <code>History</code></li>
<li><strong>FASTA file</strong>: <code>dmel-MAIN-chromosome-r6.18</code></li>
<li><strong>Sort by chromosome name</strong>: <code>As is</code></li>
<li><strong>Click <img alt="✔" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/2714.svg" title=":heavy_check_mark:" /><code>Execute</code></strong></li>
</ul>
</div>
<p>A new dataset is created, which contain the metadata of the new genome declared to Galaxy,
in a json format. This dataset is just a report and is not specially important, it can even
be deleted.</p>
<p>In contrast, if you go back to other Galaxy web page with the local data management board,
you can now click on the Tool Data Tables <code>__dbkeys__</code> and <code>all_fasta</code> and see that the
Galaxy database now contains informations in these tables about the dmel-r6.18 reference
genome.</p>
<h2 id="2-index-dmel-r618-for-bowtie">2. <img alt="🔧" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/1f527.svg" title=":wrench:" /> Index <code>dmel-r6.18</code> for <strong>Bowtie</strong>.<a class="headerlink" href="#2-index-dmel-r618-for-bowtie" title="Permanent link">&para;</a></h2>
<p>Now that dmel-r6.18 is an "official" Galaxy genome, it is easy to prepare corresponding
indexes for the aligner Bowtie.</p>
<ul>
<li>Go back to the local data manager board</li>
<li>Click on the data manager <strong>Bowtie index</strong> <em>builder</em></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Fill the form of <img alt="🔧" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/1f527.svg" title=":wrench:" /> <strong>Bowtie index</strong> <em>builder</em></p>
<ul>
<li><strong>Source FASTA Sequence</strong>: <code>dmel-r6.18</code> (no other choice !)</li>
<li><strong>Name of Sequence</strong>: <em>Leave this field empty</em></li>
<li><strong>ID for sequence</strong>: <em>Leave this field empty</em></li>
<li><strong>Click <img alt="✔" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/2714.svg" title=":heavy_check_mark:" /><code>Execute</code></strong></li>
</ul>
</div>
<p>&rarr; A new dataset <code>Bowtie index</code> is created and the orange color and running wheel indicate
that the job is ongoing to create the bowtie index.</p>
<p>It will take several minutes.</p>
<h2 id="3-index-dmel-r618-for-the-sam-to-bam-tool">3. <img alt="🔧" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/1f527.svg" title=":wrench:" /> Index <code>dmel-r6.18</code> for the <strong>sam-to-bam</strong> tool.<a class="headerlink" href="#3-index-dmel-r618-for-the-sam-to-bam-tool" title="Permanent link">&para;</a></h2>
<p>This tool required a simple index of the fasta Drosophila genome. This index will be generated
by the tool <strong>SAM FASTA index <em>builder</em></strong></p>
<ul>
<li>Go back to the local data manager board</li>
<li>Click on the data manager <strong>SAM FASTA index <em>builder</em></strong></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Fill the form of <img alt="🔧" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/1f527.svg" title=":wrench:" /> <strong>SAM FASTA index <em>builder</em></strong></p>
<ul>
<li><strong>Source FASTA Sequence</strong>: <code>dmel-r6.18</code> (no other choice !)</li>
<li><strong>Name of Sequence</strong>: <em>Leave this field empty</em></li>
<li><strong>ID for sequence</strong>: <em>Leave this field empty</em></li>
<li><strong>Click <img alt="✔" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/2714.svg" title=":heavy_check_mark:" /><code>Execute</code></strong></li>
</ul>
</div>
<p>&rarr; A new dataset <code>SAM FASTA index</code> is created and the orange color and running wheel indicate
that the job is ongoing to create the index. In contrast to the bowtie index, this one
should be created very rapidly (a few secondes)</p>
<p><strong><mark>Your Cloud Galaxy is now ready for analyses with the other trainers</mark></strong></p>
<h2 id="3-stop-your-ansible-galaxy-instance">3. Stop your ansible-galaxy instance<a class="headerlink" href="#3-stop-your-ansible-galaxy-instance" title="Permanent link">&para;</a></h2>
<p>Since we are now at the end of our first work session, we are going to stop the VM instance.</p>
<p><img alt="⚠" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/26a0.svg" title=":warning:" /> Indeed, keep in mind that a VM instance is charged by Google (on your coupon) when
it is running. If you stop your instance, there is no more cost of computing (calculated
in fonction of minutes of activity).</p>
<p>&rarr; Therefore, <mark><strong>Do not forget to stop your galaxy VM when your work session is finished</strong></mark></p>
<p><img alt="⚠" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/26a0.svg" title=":warning:" /> Yet, the cost of your storage device (100 Gb) is still recorded, whereas the
disk is used by a VM or not. Fortunately, this cost is reduced and you can keep your 100 Gb
disk for many weeks with your coupon.</p>
<p>Before to stop the instance, we are going to reserve a "static" IP address for your
ansible-galaxy VM which you will use for the rest of the training.</p>
<h3 id="a-reserve-a-static-ip-address">A. Reserve a static IP address<a class="headerlink" href="#a-reserve-a-static-ip-address" title="Permanent link">&para;</a></h3>
<p>This is more convenient because you will be able to stop your instance and restart it for
a next working session while <strong><mark>keeping the same IP adress</mark></strong>.</p>
<p>If you do not do this, the IP address of your instance may change after each stop/restart,
and you will have to reconnect to the Galaxy server with the new <a href="http://ip-address">http://ip-address</a> (which
is not so nasty actually...)</p>
<ul>
<li>Go back to the Google Cloud Platform management web page.</li>
<li>Click on the <strong>name</strong> of your VM.</li>
<li>Click on the top menu <img alt="✏" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/270f.svg" title=":pencil2:" /><code>Modifier</code></li>
<li>Deploy the menu <strong>Interfaces réseau</strong>, by clicking on the small <img alt="✏" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/270f.svg" title=":pencil2:" />pencil</li>
</ul>
<p><img alt="" src="../images/interface_reseau.png" width="300" /></p>
<ul>
<li>In the menu <strong><code>Adresse IP externe</code></strong>, select <code>Créer une adresse IP</code></li>
</ul>
<p><img alt="" src="../images/deployed_interface_reseau.png" width="400" /></p>
<ul>
<li>In the floating window <code>Réserver une nouvelle adresse IP statique</code>, give a name to the
  adresse, and click <code>Réserver</code></li>
</ul>
<p><img alt="" src="../images/floating_reserve_ip.png" width="400" /></p>
<ul>
<li><img alt="⚠" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/26a0.svg" title=":warning:" /> Back to the menu <strong>Interfaces réseau</strong>, do not forget to click the <code>OK</code> button.</li>
<li><img alt="⚠" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/26a0.svg" title=":warning:" /><img alt="⚠" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/26a0.svg" title=":warning:" /> Do not forget to click in addition, at the bottom of the page the
  <code>Enregistrer</code> button.</li>
<li>Back to the (modified) detail page of your VM, you should now see something like:</li>
</ul>
<p><img alt="" src="../images/changed_static_ip.png" width="800" /></p>
<ul>
<li>Go back to the general <code>Instance de VM</code> menu by clicking it in the left bar</li>
</ul>
<h3 id="b-stop-your-instance">B. Stop your Instance.<a class="headerlink" href="#b-stop-your-instance" title="Permanent link">&para;</a></h3>
<p>You can now safely stop your instance.</p>
<ul>
<li>Check your ansible-galaxy VM (if it is not already done)</li>
<li>Press the <img alt="" src="../images/arreter.png" width="80" /> button</li>
</ul>
<details class="warning">
<summary>For those of you who have uncontrolled pulsions of self-destruction...</summary>
<p>In some occasion, it is possible to be confused between <code>arrêter</code> and <code>détruire</code> an
VM. The consequences of unwanted VM destruction (instead of just stopping it) are generally
bad.</p>
<p>To prevent this kind of unrepairable mistakes, you can <strong>protect</strong> your instance against it.</p>
<p>To do so, follow the procedure we have used to change our ephemeral IP to static IP.
But instead of editing the <code>Interfaces réseau</code> settings, edit the <code>Protection contre la
suppression</code> option as follows:</p>
<p><img alt="" src="../images/self_destruction.png" width="300" /></p>
<p>an do not forget to save this new setting.</p>
<p>From this point, you will need to uncheck the box to destroy the instance and your are
protected against unwanted manifestations of bad karma <img alt="👿" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/1f47f.svg" title=":imp:" />!</p>
</details>
<p><center><strong>Your are done for today !</strong></center></p>
<h1 id="_1"><center><img alt="☕" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/2615.svg" title=":coffee:" /> <img alt="🍺" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/1f37a.svg" title=":beer:" /> <img alt="🍸" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/1f378.svg" title=":cocktail:" /> <img alt="🍻" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/1f37b.svg" title=":beers:" /> <img alt="🌈" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/1f308.svg" title=":rainbow:" /></center><a class="headerlink" href="#_1" title="Permanent link">&para;</a></h1>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../Loading_data_in_galaxy/" class="md-footer__link md-footer__link--prev" aria-label="Previous: LOAD INPUT DATA">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                LOAD INPUT DATA
              </div>
            </div>
          </a>
        
        
          
          <a href="../test_instance/" class="md-footer__link md-footer__link--next" aria-label="Next: TEST YOUR GALAXY INSTANCE">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                TEST YOUR GALAXY INSTANCE
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["header.autohide", "navigation.instant", "navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.prune", "navigation.footer", "content.tabs.link", "content.code.copy", "content.action.view", "content.action.edit"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.1e8ae164.min.js"></script>
      
        <script src="../../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
        <script src="../../spoiler_files/spoiler.js"></script>
      
    
  </body>
</html>